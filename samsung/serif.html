<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Serif</title>

  <style>
    #toggleContainer {
      position: absolute;
      width: 100%;
      z-index: 10;
      display: flex;
      justify-content: center;
      top: 30px;
    }

    #toggle {
      position: absolute;
      z-index: 11;
      /* width: 29%;
      max-width: 100px; */
      width: 100%;
      max-width: 250px;
    }

    #toggle img {
      width: 100%;
      height: auto;
    }

    #my-iframe {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;

    }
  </style>

  <script src="//cdn.8thwall.com/web/iframe/iframe.js"></script>

  <script>
    const IFRAME_ID = 'my-iframe' // Iframe containing AR content.
    const onLoad = () => {
      window.XRIFrame.registerXRIFrame(IFRAME_ID)
    }

    // window.addEventListener('load', function () {
    //   const cont = document.getElementById('toggleContainer');
    //   if (window.innerHeight < window.innerWidth ) {
    //     cont.style.display = 'none';
    //   }
    // })

    var isARLoaded = false


    window.addEventListener('load', function () {
      if (window.innerWidth > window.innerHeight) {
        document.getElementById('toggleContainer').style.display = 'none'
      }
    })

    function toggleSwitch() {
      console.log('clicked');
      isARLoaded = !isARLoaded;
      isARLoaded ? switchAr() : switchXR();
    }

    function switchXR() {
      const frame = document.getElementById('my-iframe');
      const img = document.getElementById('toggleBtn');
      img.setAttribute('src', 'https://sketchfabimages.s3.ap-south-1.amazonaws.com/pepperfrydata/NEW_ICONS/Toggle%2B3D_NEW.png');
      frame.setAttribute('src', 'https://web.avataar.me/samsung/serifxr.html')
    }

    function switchAr() {
      const frame = document.getElementById('my-iframe');
      const img = document.getElementById('toggleBtn');
      img.setAttribute('src', 'https://sketchfabimages.s3.ap-south-1.amazonaws.com/pepperfrydata/NEW_ICONS/Toggle%2BAR_NEW.png');
      frame.setAttribute('src', 'https://avataar.8thwall.app/serif')
      onLoad();
    }
  </script>
</head>

<body>

  <div id="toggleContainer">
    <div id="toggle">
      <img id="toggleBtn"
        src="https://sketchfabimages.s3.ap-south-1.amazonaws.com/pepperfrydata/NEW_ICONS/Toggle%2B3D_NEW.png"
        onclick="toggleSwitch()">
    </div>
  </div>


  <meta name="viewport" allowusermedia
    content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
  <iframe id="my-iframe" title="" src="https://web.avataar.me/samsung/serifxr.html" frameborder="0"
    allowfullscreen="1" sandbox="allow-scripts allow-same-origin allow-popups allow-forms"
    allow="microphone;display-capture;gyroscope; accelerometer; xr; autoplay;autostart; camera; scrolling='no'"
    mozallowfullscreen="true" webkitallowfullscreen="true" width="100%" height="100%"></iframe>
</body>

</html>